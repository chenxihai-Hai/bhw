(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-28ee8973"],{"3ca3":function(t,e,o){"use strict";var i=o("6547").charAt,a=o("69f3"),l=o("7dd0"),r="String Iterator",n=a.set,c=a.getterFor(r);l(String,"String",(function(t){n(this,{type:r,string:String(t),index:0})}),(function(){var t,e=c(this),o=e.string,a=e.index;return a>=o.length?{value:void 0,done:!0}:(t=i(o,a),e.index+=t.length,{value:t,done:!1})}))},"5e89":function(t,e,o){var i=o("861d"),a=Math.floor;t.exports=function(t){return!i(t)&&isFinite(t)&&a(t)===t}},6482:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"schoolWrap",staticStyle:{padding:"22px 16px 0"}},[o("div",{staticClass:"bgColorF",staticStyle:{padding:"10px 25px"}},[o("h2",[t._v("高校信息")]),o("h3",[t._v("一、基本信息（展示页）")]),o("div",{staticStyle:{"margin-bottom":"30px"}},[o("el-form",{staticClass:"demo-form",attrs:{model:t.formSchool}},[o("el-form-item",{attrs:{label:"高校名称","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"allIpt",staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:t.formSchool.name,callback:function(e){t.$set(t.formSchool,"name",e)},expression:"formSchool.name"}})],1),o("el-form-item",{attrs:{label:"定位","label-width":t.formLabelWidth}},[o("el-select",{staticStyle:{width:"145px","margin-right":"10px"},attrs:{placeholder:"省份"},on:{change:t.qryCityList},model:{value:t.formSchool.provinceId,callback:function(e){t.$set(t.formSchool,"provinceId",e)},expression:"formSchool.provinceId"}},t._l(t.provinceList,(function(t){return o("el-option",{key:t.provinceName,attrs:{label:t.provinceName,value:t.provinceId}})})),1),o("el-select",{staticStyle:{width:"145px"},attrs:{placeholder:"城市"},model:{value:t.formSchool.cityId,callback:function(e){t.$set(t.formSchool,"cityId",e)},expression:"formSchool.cityId"}},t._l(t.cityList,(function(t){return o("el-option",{key:t.cityName,attrs:{label:t.cityName,value:t.cityId}})})),1)],1),o("el-form-item",{attrs:{label:"国内外选择","label-width":t.formLabelWidth}},[o("el-radio",{attrs:{label:1},model:{value:t.formSchool.type,callback:function(e){t.$set(t.formSchool,"type",e)},expression:"formSchool.type"}},[t._v("国内高校")]),o("el-radio",{attrs:{label:0},model:{value:t.formSchool.type,callback:function(e){t.$set(t.formSchool,"type",e)},expression:"formSchool.type"}},[t._v("国外高校")])],1),o("el-form-item",{attrs:{label:"logo","label-width":t.formLabelWidth}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/serverManage/fileUpload/upload","on-preview":t.handlePreview,"before-upload":t.beforeUpload,"on-success":t.handleSuccess,"show-file-list":!1,"list-type":"picture"}},[o("el-button",{staticClass:"btnColorOrg",attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过2M")])],1),t.formSchool.photo?o("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.formSchool.photo,"preview-src-list":[t.formSchool.photo]}}):t._e()],1)],1)],1),o("h3",[t._v("二、高校详情页信息")]),o("div",[o("h4",[t._v("1、学校概况编辑:")]),o("el-form",{staticClass:"demo-form",attrs:{model:t.formSchool}},[o("el-form-item",{attrs:{label:"高校简介","label-width":t.formLabelWidth}},[o("quill-editor",{ref:"myQuillEditor",staticStyle:{"margin-bottom":"100px",height:"200px",width:"80%"},attrs:{options:t.editorOption},model:{value:t.formSchool.introduce,callback:function(e){t.$set(t.formSchool,"introduce",e)},expression:"formSchool.introduce"}})],1),o("el-form-item",{attrs:{label:"高校背景图","label-width":t.formLabelWidth}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/serverManage/fileUpload/upload","on-preview":t.handlePreview,"before-upload":t.beforeUpload,"on-success":t.handleBgSuccess,"show-file-list":!1,"list-type":"picture"}},[o("el-button",{staticClass:"btnColorOrg",attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过25M")])],1),t.formSchool.introduceImg?o("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.formSchool.introduceImg,"preview-src-list":[t.formSchool.introduceImg]}}):t._e()],1)],1),o("h4",[t._v("2、研究成果编辑：")]),t._l(t.formList,(function(e,i){return[o("div",{key:i,staticClass:"resultData"},[o("el-form",{staticClass:"demo-form",attrs:{model:e}},[o("el-form-item",{attrs:{label:"成果名称","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"allIpt",staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:e.patentname,callback:function(o){t.$set(e,"patentname",o)},expression:"formResult.patentname"}})],1),o("el-form-item",{attrs:{label:"专利号","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"allIpt",staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:e.patentcode,callback:function(o){t.$set(e,"patentcode",o)},expression:"formResult.patentcode"}})],1),o("el-form-item",{attrs:{label:"申请日","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"allIpt",staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:e.shenqingdate,callback:function(o){t.$set(e,"shenqingdate",o)},expression:"formResult.shenqingdate"}})],1),o("el-form-item",{attrs:{label:"联系人","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"allIpt",staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:e.dailiren,callback:function(o){t.$set(e,"dailiren",o)},expression:"formResult.dailiren"}})],1),o("el-form-item",{attrs:{label:"联系人电话","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"allIpt",staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:e.dailiJigou,callback:function(o){t.$set(e,"dailiJigou",o)},expression:"formResult.dailiJigou"}})],1),o("el-form-item",{attrs:{label:"成果图片","label-width":t.formLabelWidth}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/serverManage/fileUpload/upload","on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.handleMoreSuccess,"show-file-list":!1,"list-type":"picture"}},[o("el-button",{staticClass:"btnColorOrg btnClickUp",attrs:{size:"small",type:"primary"},on:{click:function(e){return t.recordUp(i)}}},[t._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1),e.patentimg?o("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.patentimg,"preview-src-list":[e.patentimg]}}):t._e()],1),o("el-form-item",{attrs:{label:"成果详情","label-width":t.formLabelWidth}},[o("quill-editor",{ref:"myQuillEditor",refInFor:!0,staticStyle:{height:"200px",width:"80%","margin-bottom":"100px"},attrs:{options:t.editorOption},model:{value:e.content,callback:function(o){t.$set(e,"content",o)},expression:"formResult.content"}})],1)],1)],1)]})),o("div",{staticStyle:{"text-align":"center","margin-bottom":"30px"}},[o("el-button",{staticClass:"btnMore",attrs:{type:"text"},on:{click:t.btnAddMore}},[t._v("＋添加更多成果")])],1),o("h4",[t._v("3、相关院士编辑：")]),o("el-form",{staticClass:"demo-form",attrs:{model:t.formSchool}},[o("el-form-item",{attrs:{label:"院士名称","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"allIpt",staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:t.formSchool.academician,callback:function(e){t.$set(t.formSchool,"academician",e)},expression:"formSchool.academician"}})],1),o("el-form-item",{attrs:{label:"英文名称","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"allIpt",staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:t.formSchool.enName,callback:function(e){t.$set(t.formSchool,"enName",e)},expression:"formSchool.enName"}})],1),o("el-form-item",{attrs:{label:"在校职称","label-width":t.formLabelWidth}},[o("el-input",{staticClass:"allIpt",staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:t.formSchool.academicianDuty,callback:function(e){t.$set(t.formSchool,"academicianDuty",e)},expression:"formSchool.academicianDuty"}})],1),o("el-form-item",{attrs:{label:"院士头像","label-width":t.formLabelWidth}},[o("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/serverManage/fileUpload/upload","on-preview":t.handlePreview,"before-upload":t.beforeUpload,"on-success":t.handleYsSuccess,"show-file-list":!1,"list-type":"picture"}},[o("el-button",{staticClass:"btnColorOrg",attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过2M")])],1),t.formSchool.academicianImg?o("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.formSchool.academicianImg,"preview-src-list":[t.formSchool.academicianImg]}}):t._e()],1),o("el-form-item",{attrs:{label:"简介","label-width":t.formLabelWidth}},[o("quill-editor",{ref:"myQuillEditor",staticStyle:{"margin-bottom":"120px",height:"200px",width:"80%"},attrs:{options:t.editorOption},model:{value:t.formSchool.academicianRemark,callback:function(e){t.$set(t.formSchool,"academicianRemark",e)},expression:"formSchool.academicianRemark"}})],1)],1)],2),o("div",{staticStyle:{"text-align":"center"}},[o("el-button",{staticClass:"btnColorOrg",attrs:{type:"primary"},on:{click:t.subInfo}},[t._v("保存")])],1)])])},a=[],l=(o("c975"),o("b0c0"),o("a9e3"),o("8ba4"),o("d3b7"),o("ac1f"),o("3ca3"),o("5319"),o("498a"),o("ddb0"),o("95c8")),r=o("953d"),n=(o("a753"),o("8096"),o("14e1"),o("96e9")),c={name:"createSchool",components:{quillEditor:r["quillEditor"]},data:function(){return{formLabelWidth:"150px",formList:[{schoolid:null,patentimg:null,patentname:null,patentcode:null,shenqingdate:null,dailiren:null,dailiJigou:null,content:null,moreFile:[]}],provinceList:{},cityList:{},formSchool:{photo:"",introduceImg:"",academicianImg:"",academicianRemark:"",cityId:null,name:null,type:null,introduce:null,academician:null,enName:null,academicianDuty:null},fileList:[],editorOption:{},moreFile:[],lastIndex:0}},mounted:function(){var t=this;this.qryProvinceList(),this.$route.query.schoolDet&&(this.formSchool=this.$route.query.schoolDet,this.formSchool.cityId=this.$route.query.schoolDet.collegeCity,this.formSchool.provinceId=this.$route.query.schoolDet.collegeProvince,this.formSchool.createTime=null,Object(n["d"])({schoolid:this.formSchool.id,pageSize:1e4}).then((function(e){t.formList=e.data})))},methods:{recordUp:function(t){this.lastIndex=t},subInfo:function(){var t=this;this.formSchool.id?(this.formSchool.createTime=void 0,Number.isInteger(this.formSchool.cityId)||(this.formSchool.cityId=void 0,this.formSchool.provinceId=void 0),Object(n["l"])(this.formSchool).then((function(e){var o=null,i=[];console.log("this.formList",t.formList);for(var a=0;a<t.formList.length;a++)if(o=t.formList[a],o.patentimg=null==o.patentimg?"":o.patentimg,o.createTime=void 0,o.schoolid=t.formSchool.id,null!=o.patentname&&""!=o.patentname.trim()&&null!=o.patentcode&&""!=o.patentcode.trim())if(o.id){var r=new Promise((function(t,e){o.createTime=void 0,Object(n["j"])(o).then((function(t){}))}));i.push(r)}else{r=new Promise((function(t,e){Object(n["g"])(o).then((function(t){}))}));i.push(r)}Promise.all(i).then((function(t){}));r={operateName:t.$store.getters.userName,operateId:t.$store.getters.backUserId,content:"在资源聚集区下编辑了"+t.formSchool.name};Object(l["e"])(r).then(),t.$message.success("保存成功"),t.$router.push({path:"/schoolList"})}))):Object(n["i"])(this.formSchool).then((function(e){if(e.data){for(var o=null,i=[],a=0;a<t.formList.length;a++)if(o=t.formList[a],o.patentimg=null==o.patentimg?"":o.patentimg,o.schoolid=e.data,null!=o.patentname&&""!=o.patentname.trim()&&null!=o.patentcode&&""!=o.patentcode.trim()){var r=new Promise((function(t,e){Object(n["g"])(o).then((function(t){}))}));i.push(r)}Promise.all(i).then((function(t){}));r={operateName:t.$store.getters.userName,operateId:t.$store.getters.backUserId,content:"在资源聚集区下发布了"+t.formSchool.name};Object(l["e"])(r).then(),t.$message.success("保存成功"),t.$router.push({path:"/schoolList"})}}))},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,o=t.size/1024/1024<25;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 25MB!"),e&&o},handlePreview:function(t){},handleSuccess:function(t){this.formSchool.photo=t.data,console.log("this.formSchool.photo",this.formSchool.photo),this.formSchool.photo.indexOf("-zip")>-1&&(this.formSchool.photo=this.formSchool.photo.replace("-zip",""))},handleBgSuccess:function(t){this.formSchool.introduceImg=t.data,this.formSchool.introduceImg.indexOf("-zip")>-1&&(this.formSchool.introduceImg=this.formSchool.introduceImg.replace("-zip",""))},handleYsSuccess:function(t){this.formSchool.academicianImg=t.data,this.formSchool.academicianImg.indexOf("-zip")>-1&&(this.formSchool.academicianImg=this.formSchool.academicianImg.replace("-zip",""))},handleRemove:function(t,e){this.formList[this.lastIndex].moreFile[t.url]=""},handleMoreSuccess:function(t,e){var o=t.data;this.formList[this.lastIndex].patentimg=t.data,o.indexOf("-zip")>-1&&(this.formList[this.lastIndex].patentimg=o.replace("-zip",""))},qryProvinceList:function(){var t=this;Object(l["c"])().then((function(e){t.provinceList=e.data}))},qryCityList:function(t){var e=this;Object(l["b"])({provinceId:t}).then((function(t){e.cityList=t.data}))},btnAddMore:function(){this.formList.push({schoolid:null,patentimg:null,patentname:null,patentcode:null,shenqingdate:null,dailiren:null,dailiJigou:null,content:null,moreFile:[]})}}},s=c,d=(o("678b"),o("2877")),m=Object(d["a"])(s,i,a,!1,null,"c525db76",null);e["default"]=m.exports},"678b":function(t,e,o){"use strict";var i=o("cc2b"),a=o.n(i);a.a},"8ba4":function(t,e,o){var i=o("23e7"),a=o("5e89");i({target:"Number",stat:!0},{isInteger:a})},"96e9":function(t,e,o){"use strict";o.d(e,"f",(function(){return r})),o.d(e,"i",(function(){return n})),o.d(e,"l",(function(){return c})),o.d(e,"c",(function(){return s})),o.d(e,"g",(function(){return d})),o.d(e,"j",(function(){return m})),o.d(e,"a",(function(){return u})),o.d(e,"d",(function(){return p})),o.d(e,"e",(function(){return h})),o.d(e,"h",(function(){return f})),o.d(e,"k",(function(){return b})),o.d(e,"b",(function(){return g}));var i=o("dad6"),a=o("4328"),l=o.n(a);function r(t){return Object(i["a"])({url:"/api/adminApi/college/qryCollegeList",params:t,method:"get"})}function n(t){return Object(i["a"])({url:"/api/adminApi/college/saveSchoolInfo",data:l.a.stringify(t),method:"post"})}function c(t){return Object(i["a"])({url:"/api/adminApi/college/upSchoolInfo",data:l.a.stringify(t),method:"post"})}function s(t){return Object(i["a"])({url:"/api/adminApi/college/delSchoolInfo",params:t,method:"post"})}function d(t){return Object(i["a"])({url:"/api/adminApi/patent/savePatentBean",data:l.a.stringify(t),method:"post"})}function m(t){return Object(i["a"])({url:"/api/adminApi/patent/upPatentBean",data:l.a.stringify(t),method:"post"})}function u(t){return Object(i["a"])({url:"/api/adminApi/patent/delPatentBean",params:t,method:"get"})}function p(t){return Object(i["a"])({url:"/api/adminApi/patent/qryPatentList",params:t,method:"get"})}function h(t){return Object(i["a"])({url:"/api/adminApi/resourceArea/getResourceAreaRange",params:t,method:"get"})}function f(t){return Object(i["a"])({url:"/api/adminApi/resourceArea/saveResourceArea",params:t,method:"post"})}function b(t){return Object(i["a"])({url:"/api/adminApi/resourceArea/upResourceArea",params:t,method:"post"})}function g(t){return Object(i["a"])({url:"/api/adminApi/resourceArea/delResourceArea",params:t,method:"post"})}},a9e3:function(t,e,o){"use strict";var i=o("83ab"),a=o("da84"),l=o("94ca"),r=o("6eeb"),n=o("5135"),c=o("c6b6"),s=o("7156"),d=o("c04e"),m=o("d039"),u=o("7c73"),p=o("241c").f,h=o("06cf").f,f=o("9bf2").f,b=o("58a8").trim,g="Number",v=a[g],S=v.prototype,y=c(u(S))==g,I=function(t){var e,o,i,a,l,r,n,c,s=d(t,!1);if("string"==typeof s&&s.length>2)if(s=b(s),e=s.charCodeAt(0),43===e||45===e){if(o=s.charCodeAt(2),88===o||120===o)return NaN}else if(48===e){switch(s.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+s}for(l=s.slice(2),r=l.length,n=0;n<r;n++)if(c=l.charCodeAt(n),c<48||c>a)return NaN;return parseInt(l,i)}return+s};if(l(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,w=function(t){var e=arguments.length<1?0:t,o=this;return o instanceof w&&(y?m((function(){S.valueOf.call(o)})):c(o)!=g)?s(new v(I(e)),o,w):I(e)},L=i?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;L.length>C;C++)n(v,x=L[C])&&!n(w,x)&&f(w,x,h(v,x));w.prototype=S,S.constructor=w,r(a,g,w)}},cc2b:function(t,e,o){},ddb0:function(t,e,o){var i=o("da84"),a=o("fdbc"),l=o("e260"),r=o("9112"),n=o("b622"),c=n("iterator"),s=n("toStringTag"),d=l.values;for(var m in a){var u=i[m],p=u&&u.prototype;if(p){if(p[c]!==d)try{r(p,c,d)}catch(f){p[c]=d}if(p[s]||r(p,s,m),a[m])for(var h in l)if(p[h]!==l[h])try{r(p,h,l[h])}catch(f){p[h]=l[h]}}}}}]);
//# sourceMappingURL=chunk-28ee8973.388e729e.js.map