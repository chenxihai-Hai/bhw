(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55a7c467"],{"1c8c":function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"f",(function(){return r})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return s}));var o=a("dad6");function n(e){return Object(o["a"])({url:"/api/adminApi/backRole/qryBackRoleList",params:e,method:"get"})}function l(e){return Object(o["a"])({url:"/api/adminApi/backRole/saveBackRole",params:e,method:"post"})}function i(e){return Object(o["a"])({url:"/api/adminApi/backRole/delBackRole",params:e,method:"post"})}function r(e){return Object(o["a"])({url:"/api/adminApi/backRole/upBackRole",params:e,method:"post"})}function c(e){return Object(o["a"])({url:"/api/adminApi/backRole/saveRoleMenus",params:e,method:"post"})}function s(e){return Object(o["a"])({url:"/api/adminApi/backRole/qryBackRoleParams",params:e,method:"post"})}},a15b:function(e,t,a){"use strict";var o=a("23e7"),n=a("44ad"),l=a("fc6a"),i=a("b301"),r=[].join,c=n!=Object,s=i("join",",");o({target:"Array",proto:!0,forced:c||s},{join:function(e){return r.call(l(this),void 0===e?",":e)}})},f7ee:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"listWarp",staticStyle:{padding:"22px 16px 0"}},[a("div",{staticClass:"bgColorF",staticStyle:{padding:"0 25px"}},[a("h3",[e._v("角色权限")]),a("el-form",{staticClass:"demo-form-inline",staticStyle:{margin:"33px 40px"},attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"角色"}},[a("el-select",{attrs:{placeholder:"角色"},model:{value:e.formInline.id,callback:function(t){e.$set(e.formInline,"id",t)},expression:"formInline.id"}},e._l(e.backRoleParList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",[a("el-button",{staticClass:"btnColorOrg btnQueryList",attrs:{type:"primary"},on:{click:e.qryBackRoleList}},[e._v("查询")])],1)],1),a("el-row",{staticStyle:{"margin-bottom":"20px"}},[a("el-col",[a("el-button",{staticClass:"btnColorBlue btnQueryList",attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加")]),a("el-button",{staticClass:"btnColorOrg btnQueryList",attrs:{type:"primary"},on:{click:function(t){return e.delBackRole(void 0)}}},[e._v("删除")])],1)],1),a("el-row",[a("el-col",[a("el-table",{staticClass:"allTable",attrs:{data:e.backRoleList},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"ID",type:"index",align:"center"}}),a("el-table-column",{attrs:{label:"角色名",prop:"roleName",align:"center"}}),a("el-table-column",{attrs:{label:"具体描述",prop:"roleDesc",align:"center"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"220px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btnColorOrg",staticStyle:{width:"59px",height:"24px",padding:"0"},attrs:{size:"mini"},on:{click:function(a){return e.upBackRole(t.row)}}},[e._v("编辑 ")]),a("el-button",{staticClass:"btnColorBlue",staticStyle:{width:"59px",height:"24px",padding:"0"},attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.delBackRole(t.row)}}},[e._v("删除 ")]),a("el-button",{staticClass:"btnColorOrg",staticStyle:{width:"59px",height:"24px",padding:"0"},attrs:{size:"mini"},on:{click:function(a){return e.upRoleMenu(t.row)}}},[e._v("权限分配 ")])]}}])})],1)],1)],1),a("el-row",{staticStyle:{"text-align":"center",margin:"30px auto 50px"}},[a("el-col",{staticClass:"pageWrap"},[a("el-pagination",{staticClass:"pageBox",attrs:{background:"",layout:"prev, pager, next","page-size":e.formInline.pageSize,"current-page":e.formInline.curPage,total:e.pageTotal},on:{"current-change":e.currentChange}})],1)],1)],1),a("el-dialog",{attrs:{title:"编辑角色信息",visible:e.addDialogVisible,width:"30%"},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{ref:"backRoleInfo",attrs:{"label-position":"right","label-width":"80px",model:e.backRoleInfo}},[a("el-form-item",{attrs:{label:"角色名"}},[a("el-input",{model:{value:e.backRoleInfo.roleName,callback:function(t){e.$set(e.backRoleInfo,"roleName",t)},expression:"backRoleInfo.roleName"}})],1),a("el-form-item",{attrs:{label:"角色描述"}},[a("el-input",{model:{value:e.backRoleInfo.roleDesc,callback:function(t){e.$set(e.backRoleInfo,"roleDesc",t)},expression:"backRoleInfo.roleDesc"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")]),a("el-button",{on:{click:function(t){return e.resetForm("backRoleInfo")}}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"编辑角色权限",visible:e.addRoleMenuDialogVisible,width:"50%"},on:{"update:visible":function(t){e.addRoleMenuDialogVisible=t}}},[a("el-form",{ref:"backRoleMenuInfo",attrs:{"label-position":"right","label-width":"80px",model:e.backRoleMenuInfo}},[a("el-form-item",{attrs:{label:"权限范围"}},[a("el-tree",{ref:"menuTree",attrs:{data:e.backMenusList,"show-checkbox":"","node-key":"id","default-checked-keys":e.backRoleMenuList}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitRoleMenuForm}},[e._v("确定")]),a("el-button",{on:{click:function(t){return e.resetForm("backRoleMenuInfo")}}},[e._v("取消")])],1)],1)],1)],1)},n=[],l=(a("4160"),a("a15b"),a("159b"),a("95c8")),i=a("1c8c"),r=a("7ded"),c={name:"backRoleList",data:function(){return{formInline:{id:null,pageSize:5,curPage:1},backRoleInfo:{roleName:null,roleDesc:null},backRoleMenuInfo:{roleId:""},addRoleMenuDialogVisible:!1,addDialogVisible:!1,pageTotal:0,selectList:[],backRoleList:[],backRoleParList:[],backMenusList:[],backRoleMenuList:[]}},created:function(){this.qryBackRoleParams(),this.qryBackRoleList()},methods:{qryBackRoleList:function(){var e=this;Object(i["b"])(this.formInline).then((function(t){e.backRoleList=t.data}))},qryBackRoleParams:function(){var e=this;Object(i["c"])().then((function(t){e.backRoleParList=t.data}))},currentChange:function(e){this.formInline.curPage=e,this.qryBackRoleList()},delBackRole:function(e){var t=this;this.$confirm("确认删除该信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"btnColorOrg",confirmButtonClass:"btnColorBlue",type:"warning"}).then((function(){var a=[];e?a.push(e.id):t.selectList.forEach((function(e,t){a.push(e.id)})),a.length<1||Object(i["a"])({idList:a.join(",")}).then((function(a){var o={operateName:t.$store.getters.userName,operateId:t.$store.getters.backUserId,content:void 0==e?"在运营人员管理下进行了批量删除角色":"在运营人员管理下删除了"+e.roleName+"角色"};Object(l["e"])(o).then(),t.$message.success("删除成功"),t.qryBackRoleList()}))})).catch((function(){}))},submitForm:function(){var e=this;this.backRoleInfo.id?Object(i["f"])(this.backRoleInfo).then((function(t){e.addDialogVisible=!1;var a={operateName:e.$store.getters.userName,operateId:e.$store.getters.backUserId,content:"在运营人员管理下对角色为"+e.backRoleInfo.roleName+"进行了编辑"};Object(l["e"])(a).then(),e.$message.success("编辑成功"),e.qryBackRoleList()})):Object(i["d"])(this.backRoleInfo).then((function(t){e.addDialogVisible=!1;var a={operateName:e.$store.getters.userName,operateId:e.$store.getters.backUserId,content:"在运营人员管理下新增了角色为"+e.backRoleInfo.roleName};Object(l["e"])(a).then(),e.$message.success("添加成功"),e.qryBackRoleList()}))},upRoleMenu:function(e){var t=this;this.backRoleMenuInfo.roleId=e.id,Object(r["b"])().then((function(a){t.addRoleMenuDialogVisible=!0,t.backMenusList=a.data,Object(r["c"])({roleId:e.id}).then((function(e){e.data.forEach((function(e){"false"!=e.type&&t.backRoleMenuList.push(e.id),e.children.forEach((function(e){"false"!=e.type&&t.backRoleMenuList.push(e.id),e.children.forEach((function(e){"false"!=e.type&&t.backRoleMenuList.push(e.id)}))}))})),t.$refs.menuTree.setCheckedKeys(t.backRoleMenuList)}))}))},submitRoleMenuForm:function(){var e=this;Object(i["e"])({idList:this.$refs.menuTree.getCheckedKeys().join(","),roleId:this.backRoleMenuInfo.roleId}).then((function(t){e.addRoleMenuDialogVisible=!1,e.$message.success("编辑成功"),e.qryBackRoleList()}))},upBackRole:function(e){this.backRoleInfo=e,this.addDialogVisible=!0},resetForm:function(e){this.addDialogVisible=!1,this.addRoleMenuDialogVisible=!1,this.$refs[e].resetFields()},handleSelectionChange:function(e){this.selectList=e,console.log(this.selectList)}}},s=c,u=a("2877"),b=Object(u["a"])(s,o,n,!1,null,"01453378",null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-55a7c467.e30b3d28.js.map